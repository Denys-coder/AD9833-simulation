<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AD9833 simulation</title>
    <link rel="stylesheet" href="../css/main-styles.css">
    <link rel="stylesheet" href="../css/vertical-toggle-button.css">
    <link rel="stylesheet" href="../css/presetSelect.css">
    <link rel="icon" type="image/png" href="../images/favicon.png">
</head>
<body>

<div class="controlPlane">
    <div class="controlPlane_leftPart">
        <label for="preset_select">Preset:</label>
        <select id="preset_select" onchange="changePreset()">
            <option value="" hidden>select preset</option>
            <option value="preset 1">preset 1</option>
            <option value="preset 2">preset 2</option>
            <option value="preset 3">preset 3</option>
        </select>
        <br>
        <br>

        <label for="freq0_reg_input">FREQ0 REG (28 bit)</label>
        <br>
        <input type="text" id="freq0_reg_input" size="40" onchange="unselectPreset()">
        <br>
        <br>

        <label for="freq1_reg_input">FREQ1 REG (28 bit)</label>
        <br>
        <input type="text" id="freq1_reg_input" size="40" onchange="unselectPreset()">
        <br>
        <br>

        <label for="phase_accumulator_input">PHASE ACCUMULATOR (28-BIT)</label>
        <br>
        <input type="text" id="phase_accumulator_input" size="40" onchange="unselectPreset()">
        <br>
        <br>

        <label for="phase0_reg_input">PHASE0 REG (12 bit)</label>
        <br>
        <input type="text" id="phase0_reg_input" size="40" onchange="unselectPreset()">
        <br>
        <br>

        <label for="phase1_reg_input">PHASE1 REG (12 bit)</label>
        <br>
        <input type="text" id="phase1_reg_input" size="40" onchange="unselectPreset()">
        <br>
        <br>

        <label for="control_register_input">CONTROL REGISTER (16 bit)</label>
        <br>
        <input type="text" id="control_register_input" size="40" onchange="unselectPreset(); updateMuxes();">
    </div>
    <div class="controlPlane_rightPart">

        <fieldset>
            <legend>mux1</legend>
            <div class="toggle-switch-container">
                <div class="toggle-switch switch-vertical">
                    <input type="radio" id="mux1_first" name="mux1" value="first" onchange="mux1Changed()"/>
                    <label for="mux1_first">first</label>
                    <input type="radio" id="mux1_second" name="mux1" value="second" onchange="mux1Changed()"/>
                    <label for="mux1_second">second</label>
                    <span class="toggle-outside">
                  <span class="toggle-inside"></span>
                </span>
                </div>
            </div>
        </fieldset>

        <fieldset>
            <legend>mux2</legend>
            <div class="toggle-switch-container">
                <div class="toggle-switch switch-vertical">
                    <input type="radio" id="mux2_first" name="mux2" value="first" onchange="mux2Changed()"/>
                    <label for="mux2_first">first</label>
                    <input type="radio" id="mux2_second" name="mux2" value="second" onchange="mux2Changed()"/>
                    <label for="mux2_second">second</label>
                    <span class="toggle-outside">
                  <span class="toggle-inside"></span>
                </span>
                </div>
            </div>
        </fieldset>

        <fieldset>
            <legend>mux4</legend>
            <div class="toggle-switch-container">
                <div class="toggle-switch switch-vertical">
                    <input type="radio" id="mux4_first" name="mux4" value="first" onchange="mux4Changed()"/>
                    <label for="mux4_first">first</label>
                    <input type="radio" id="mux4_second" name="mux4" value="second" onchange="mux4Changed()"/>
                    <label for="mux4_second">second</label>
                    <span class="toggle-outside">
                  <span class="toggle-inside"></span>
                </span>
                </div>
            </div>
        </fieldset>
        <br>

        <label for="base_frequency_input">base frequency</label>
        <br>
        <input type="text" id="base_frequency_input" value="10">

        <select id="base_frequency_unit_select">
            <option value="1">Hz</option>
            <option value="1_000">KHz</option>
            <option value="1_000_000">MHz</option>
        </select>
    </div>
</div>

<div class="currentState">
    <div class="currentState_leftPart">
        <p>Current values:</p>
        <br>
        <p>FREQ0 REG: <span id="current_freq0_reg"></span></p>
        <br>
        <p>FREQ1 REG: <span id="current_freq1_reg"></span></p>
        <br>
        <p>PHASE ACCUMULATOR: <span id="current_phase_accumulator"></span></p>
        <br>
        <p>CENTRAL SUM: <span id="current_central_sum"></span></p>
        <br>
        <p>PHASE0 REG: <span id="current_phase0_reg"></span></p>
        <br>
        <p>PHASE1 REG: <span id="current_phase1_reg"></span></p>
        <br>
        <p>CONTROL REGISTER: <span id="current_control_register"></span></p>
        <br>
        <p>SIN ROM: <span id="current_sin_rom"></span></p>
        <br>
        <p>10-BIT DAC: <span id="current_10_bit_dac"></span></p>
    </div>
    <div class="currentState_rightPart">
        <img src="../images/schema-pictures/no-path-schema.png" id="functional_block_diagram" width="594" height="344"
             alt="functional block diagram" class="functional_block_diagram">
    </div>
</div>

<!-- Кнопка "Run" / "Run n tacts" берёт значения из полей для ввода, обновляет значения
     по которым генерируется график и запускает генерацию графика, если нажать эту кнопку когда график
     и так генерируется то вывести модальное окно с ошибкой. -->

<!-- Кнопка "Pause" ставит флаг что генерация графика должна остановиться
     и функция которая генерирует график всё время проверяет флаг и если надо останавливается,
     если нажать эту кнопку когда график не был ниразу запущен или на паузе то вывести модальное окно с ошибкой. -->

<!-- Кнопка "Continue" продолжает выполнение графика, если график и так работает или
     если ещё небыл ниразу запущен, то вывести соответствующие ошибки. -->

<!-- Старый график никогда не удаляется. -->

<div class="controlButtons">
    <button onclick="runGraph()" id="generate_graph" class="greenBackground">Run</button>
    <button onclick="runGraph(1)" class="greenBackground">Run 1 tact</button>
    <button onclick="runGraph(10)" class="greenBackground">Run 10 tacts</button>
    <button onclick="runGraph(20)" class="greenBackground">Run 20 tacts</button>
    <button onclick="runGraph(30)" class="greenBackground">Run 30 tacts</button>
    <button onclick="runNTactsGraph()" class="greenBackground">Run tacts:</button>
    <input type="text" size="1" id="tacts_to_run_input" onclick="event.stopPropagation()" class="greenBackground">
    <button onclick="pauseGraph()" class="yellowBackground">Pause</button>
    <button onclick="continueGraph()" class="blueBackground">Continue</button>
</div>

<div class="graphContainer" id="graphContainer"></div>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="../js/script.js"></script>
</body>
</html>